using System;
using System.Collections.Generic;
using System.Linq;
using System.Security.Cryptography;
using System.Text;
using System.Threading.Tasks;

namespace UsersToJson
{
    internal class Users
    {
       
            private string imagePath;
            public string email { get; set; }
            public string full_name { get; set; }
            public bool is_manager { get; set; }
            public bool is_engineer { get; set; }
            public string phone { get; set; }
            public string id { get; set; }
            public bool is_operator { get; set; }
            public string role { get; set; }
            public string image { get =>imagePath; set =>  imagePath = value.Split(", ", 2).LastOrDefault();  }
            public string password { get; set; } = Convert.ToBase64String(SHA512.HashData(Encoding.UTF8.GetBytes("12345678")));
    }
}


//
using Newtonsoft.Json;
using UsersToJson;
using System.IO;

var files = Directory.GetFiles("Files");
string outputFile = "output.json";
List<Users> allItems = new();
foreach (var file in files)
{
    string jsonString = File.ReadAllText(file);
  
        var currentItem = JsonConvert.DeserializeObject<Users>(jsonString);
        allItems.Add(currentItem);
    string outputJson = JsonConvert.SerializeObject(allItems, Formatting.Indented);
    File.WriteAllText(outputFile, outputJson);
    Console.WriteLine(outputFile);
}